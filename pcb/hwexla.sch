EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 4
Title "hWexla - turnout controller"
Date "2021-12-02"
Rev "1.0"
Comp "Model Railroader Club Brno I – KMŽ Brno I – https://kmz-brno.cz/"
Comment1 "Jan Horáček"
Comment2 "https://github.com/kmzbrnoI/hwexla"
Comment3 "https://creativecommons.org/licenses/by-sa/4.0/"
Comment4 "Released under the Creative Commons Attribution-ShareAlike 4.0 License"
$EndDescr
$Comp
L Connector:DB25_Male J1
U 1 1 61A8E3F4
P 1000 3550
F 0 "J1" H 918 2058 50  0000 C CNN
F 1 "DB25_Male" H 918 2149 50  0000 C CNN
F 2 "" H 1000 3550 50  0001 C CNN
F 3 " ~" H 1000 3550 50  0001 C CNN
	1    1000 3550
	-1   0    0    1   
$EndComp
$Comp
L MCU_Microchip_ATtiny:ATtiny1617-M U2
U 1 1 61A924E6
P 5850 4150
F 0 "U2" H 5850 2650 50  0000 C CNN
F 1 "ATtiny1617-M" H 5850 2750 50  0000 C CNN
F 2 "Package_DFN_QFN:QFN-24-1EP_4x4mm_P0.5mm_EP2.6x2.6mm" H 5850 4150 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/ATtiny3217_1617-Data-Sheet-40001999B.pdf" H 5850 4150 50  0001 C CNN
	1    5850 4150
	1    0    0    -1  
$EndComp
$Sheet
S 2900 6100 1500 500 
U 61AA5240
F0 "power" 50
F1 "power.sch" 50
F2 "SERVO-POWER-EN" I R 4400 6200 50 
F3 "SERVO-VCC" O R 4400 6350 50 
F4 "+12V" I L 2900 6200 50 
F5 "VCC" O R 4400 6500 50 
$EndSheet
$Sheet
S 2600 3850 1500 1000
U 61AA561A
F0 "relay" 50
F1 "relay.sch" 50
F2 "RELA+" B L 2600 3950 50 
F3 "RELA0" B L 2600 4100 50 
F4 "RELA-" B L 2600 4250 50 
F5 "RELB+" B L 2600 4450 50 
F6 "RELB0" B L 2600 4600 50 
F7 "RELB-" B L 2600 4750 50 
F8 "REL-CONTROL" I R 4100 4350 50 
$EndSheet
$Comp
L power:VCC #PWR?
U 1 1 61CEF176
P 5850 3050
F 0 "#PWR?" H 5850 2900 50  0001 C CNN
F 1 "VCC" H 5865 3223 50  0000 C CNN
F 2 "" H 5850 3050 50  0001 C CNN
F 3 "" H 5850 3050 50  0001 C CNN
	1    5850 3050
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 61CEFE33
P 5850 5250
F 0 "#PWR?" H 5850 5000 50  0001 C CNN
F 1 "GND" H 5855 5077 50  0000 C CNN
F 2 "" H 5850 5250 50  0001 C CNN
F 3 "" H 5850 5250 50  0001 C CNN
	1    5850 5250
	1    0    0    -1  
$EndComp
Connection ~ 5850 3050
$Comp
L power:GND #PWR?
U 1 1 61CF241F
P 5200 3350
F 0 "#PWR?" H 5200 3100 50  0001 C CNN
F 1 "GND" H 5205 3177 50  0000 C CNN
F 2 "" H 5200 3350 50  0001 C CNN
F 3 "" H 5200 3350 50  0001 C CNN
	1    5200 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61CF35F4
P 6550 3200
F 0 "R?" H 6620 3246 50  0000 L CNN
F 1 "10k" H 6620 3155 50  0000 L CNN
F 2 "" V 6480 3200 50  0001 C CNN
F 3 "~" H 6550 3200 50  0001 C CNN
	1    6550 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	6450 3350 6550 3350
Wire Wire Line
	5850 3050 6550 3050
Wire Wire Line
	5850 3050 5200 3050
$Comp
L Device:C C?
U 1 1 61CF0CFB
P 5200 3200
F 0 "C?" H 5085 3154 50  0000 R CNN
F 1 "100n" H 5085 3245 50  0000 R CNN
F 2 "" H 5238 3050 50  0001 C CNN
F 3 "~" H 5200 3200 50  0001 C CNN
	1    5200 3200
	1    0    0    1   
$EndComp
Text Label 1850 2350 0    50   ~ 0
CAN-IN+
Text Label 1850 2550 0    50   ~ 0
CAN-IN-
Text Label 1850 2750 0    50   ~ 0
CAN-SLAVE
Text Label 1850 2950 0    50   ~ 0
CAN-OUT+
Text Label 1850 3150 0    50   ~ 0
CAN-OUT-
Text Label 1850 3350 0    50   ~ 0
CAN-BTN+
Text Label 1850 3550 0    50   ~ 0
CAN-BTN-
$Sheet
S 2600 2250 1550 1400
U 61AA542B
F0 "io" 50
F1 "io.sch" 50
F2 "CAN-BTN+" B L 2600 3350 50 
F3 "CAN-BTN-" B L 2600 3550 50 
F4 "CAN-IN+" I L 2600 2350 50 
F5 "CAN-IN-" I L 2600 2550 50 
F6 "CAN-OUT+" O L 2600 2950 50 
F7 "CAN-OUT-" O L 2600 3150 50 
F8 "CPU-IN+" O R 4150 2450 50 
F9 "CPU-IN-" O R 4150 2550 50 
F10 "CPU-BTN+-OUT" I R 4150 2750 50 
F11 "CPU-BTN+-IN" O R 4150 2650 50 
F12 "CPU-BTN--OUT" I R 4150 2950 50 
F13 "CPU-BTN--IN" O R 4150 2850 50 
F14 "CPU-OUT+" I R 4150 3050 50 
F15 "CPU-OUT-" I R 4150 3150 50 
F16 "CAN-SLAVE" I L 2600 2750 50 
F17 "CPU-SLAVE" O R 4150 2350 50 
$EndSheet
Wire Wire Line
	1300 2350 2600 2350
Wire Wire Line
	1300 2550 2600 2550
Wire Wire Line
	2600 2750 1300 2750
Wire Wire Line
	1300 2950 2600 2950
Wire Wire Line
	2600 3150 1300 3150
Wire Wire Line
	1300 3350 2600 3350
Wire Wire Line
	2600 3550 1300 3550
Wire Wire Line
	1300 2450 1400 2450
Wire Wire Line
	1400 2450 1400 2650
Wire Wire Line
	1400 2650 1300 2650
$Comp
L power:GND #PWR?
U 1 1 61D7962C
P 1400 2650
F 0 "#PWR?" H 1400 2400 50  0001 C CNN
F 1 "GND" V 1405 2522 50  0000 R CNN
F 2 "" H 1400 2650 50  0001 C CNN
F 3 "" H 1400 2650 50  0001 C CNN
	1    1400 2650
	0    -1   -1   0   
$EndComp
Connection ~ 1400 2650
Wire Wire Line
	1300 2850 1400 2850
Wire Wire Line
	1400 2850 1400 3050
Wire Wire Line
	1400 3050 1300 3050
$Comp
L power:+12V #PWR?
U 1 1 61D7DEBE
P 1400 2850
F 0 "#PWR?" H 1400 2700 50  0001 C CNN
F 1 "+12V" V 1415 2978 50  0000 L CNN
F 2 "" H 1400 2850 50  0001 C CNN
F 3 "" H 1400 2850 50  0001 C CNN
	1    1400 2850
	0    1    1    0   
$EndComp
Connection ~ 1400 2850
NoConn ~ 1300 3250
$Comp
L power:VCC #PWR?
U 1 1 61D85285
P 1600 3450
F 0 "#PWR?" H 1600 3300 50  0001 C CNN
F 1 "VCC" V 1615 3578 50  0000 L CNN
F 2 "" H 1600 3450 50  0001 C CNN
F 3 "" H 1600 3450 50  0001 C CNN
	1    1600 3450
	0    1    1    0   
$EndComp
$Comp
L Device:Polyfuse F?
U 1 1 61D86674
P 1450 3450
F 0 "F?" V 1225 3450 50  0000 C CNN
F 1 "50mA" V 1316 3450 50  0000 C CNN
F 2 "" H 1500 3250 50  0001 L CNN
F 3 "~" H 1450 3450 50  0001 C CNN
	1    1450 3450
	0    1    1    0   
$EndComp
Wire Wire Line
	1300 3750 1400 3750
Wire Wire Line
	1400 3750 1400 3950
Wire Wire Line
	1400 3950 1300 3950
Wire Wire Line
	1300 4150 1400 4150
Wire Wire Line
	1400 4150 1400 4350
Wire Wire Line
	1400 4350 1300 4350
Wire Wire Line
	1300 4550 1400 4550
Wire Wire Line
	1400 4550 1400 4750
Wire Wire Line
	1400 4750 1300 4750
Wire Wire Line
	1300 4650 1500 4650
Wire Wire Line
	1500 4650 1500 4450
Wire Wire Line
	1500 4450 1300 4450
Wire Wire Line
	1300 4250 1500 4250
Wire Wire Line
	1500 4250 1500 4100
Wire Wire Line
	1500 4050 1300 4050
Wire Wire Line
	1300 3850 1500 3850
Wire Wire Line
	1500 3850 1500 3650
Wire Wire Line
	1500 3650 1300 3650
Wire Wire Line
	2600 3950 2300 3950
Wire Wire Line
	2300 3950 2300 3850
Connection ~ 1500 3850
Wire Wire Line
	2600 4100 1500 4100
Connection ~ 1500 4100
Wire Wire Line
	1500 4100 1500 4050
Connection ~ 1500 4450
Wire Wire Line
	2200 3950 2200 4450
Connection ~ 1400 3950
Wire Wire Line
	2100 4350 2100 4600
Connection ~ 1400 4350
Wire Wire Line
	1400 4750 2600 4750
Connection ~ 1400 4750
Text Label 1600 3850 0    50   ~ 0
RELA+
Text Label 1600 3950 0    50   ~ 0
RELB+
Text Label 1600 4100 0    50   ~ 0
RELA0
Text Label 1600 4450 0    50   ~ 0
RELA-
Wire Wire Line
	1500 3850 2300 3850
Wire Wire Line
	2200 4450 2600 4450
Wire Wire Line
	1400 3950 2200 3950
Wire Wire Line
	2100 4600 2600 4600
Wire Wire Line
	1400 4350 2100 4350
Wire Wire Line
	2000 4450 2000 4250
Wire Wire Line
	1500 4450 2000 4450
Wire Wire Line
	2000 4250 2600 4250
Text Label 1600 4350 0    50   ~ 0
RELB0
Text Label 1600 4750 0    50   ~ 0
RELB-
$EndSCHEMATC
